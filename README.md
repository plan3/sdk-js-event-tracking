# sdk-js-event-tracking

## Get up and running:

`npm install`

`grunt`

## When developing:

`./run-watch.sh`

# Documentation

This documentation is the target for the functionality of v1.

## Activity(opts)

```
opts = {
    pageId: '',     // The Id of the current page/article
    pageType: '',   // The type of page/article (page, article, application etc.)
    clientId: '',   // The providers ID, supplied by SPT.
}
```

### Activity.Event(eventType)

#### Activity.Event.pageLoad(title, activityType)

##### Required parameters

`title` - The title of the page. Will default to document.title

`activityType` - The type of activity that is being tracked. Will default to 'Read'

##### Generated objects

`object` as `'primary'` - Where the event originated.

##### Extra parameter suggestions

`content` store the content of the submitted form.

#### Activity.Event.trackForm(formId, contentType)

##### Required parameters

`formId` - The ID of the form element, must be unique per page.

`contentType` - The type of content generated by the form (note, spt:email, other? )

##### Generated objects

`object` as `'primary'` - Where the event originated. In this case, the form.

`result` as `'secondary'` - The result of the event. In this case, some new content from the form.

##### Extra parameter suggestions

`displayName` - The title of the form in a human readable format.

`content` store the content of the submitted form.

`inReplyTo` a string or a object that links the this form submission to a some other entity.

`url` A URL will be set automatically using document.URL, but if you are running a single page application or for some other reason want to change the URL, feel free to do so.

#### Activity.Event.trackComment(formId)

##### Required parameters

`formId` - The ID of the form element, must be unique per page.

##### Generated objects

`object` as `'primary'` - Where the event originated. In this case, the form.

`result` as `'secondary'` - The result of the event. In this case, a new comment.

##### Extra parameter suggestions

`content` - store the content of the comment.

`inReplyTo` - a string or a link object that links this comment to a page/article or another comment.

##### Custom data suggestion

`spt:commentId` - The ID of the comment being generated by the comment form

#### Activity.Event.trackPoll(formId)

##### Required parameters

`formId` - The ID of the form element, must be unique per page.

##### Generated objects

`object` as `'primary'` - Where the event originated. In this case, the form.

`result` as `'secondary'` - The result of the event. In this case, a reply to the poll.

##### Extra parameter suggestions

`question` - The question being asked, will be stored in displayName in primary object.

`oneOf` - A object in the `object` with `@type` 'collection' and `items` property with a array of possible answers.

`replies` - A object in the `result` with `@type` 'collection' and `items` property with a array of answers.

#### Activity.Event.trackClick(elementId, displayName, targetType, targetId)

##### Required parameters

`elementId` - The ID of the clicked element.

`displayName` - The name/title of the clicked element.

`targetType` - The type of entity that is the target for the action (page, application, process, article)

`targetId` - The ID of the target.

##### Generated objects

`object` as `'primary'` - Where the event originated. In this case, the clicked element.

`target` as `'secondary'` - The target of the action. Normally the current page or where a users ends up after the action.

##### Extra parameter suggestions

`displayName` To get a good textual representation. Can be used for both primary and secondary object.

#### Activity.Event.trackSocial(elementId, networkName)

##### Required parameters

`elementId` - The ID of the button or link the user clicks to achieve a social action (e.g Facebook like button)

`networkName` - The name of the social network. (Facebook, Twitter, Pintrest etc.)

##### Generated objects

`object` as `'primary'` - The page/article/entity being shared/liked.

`origin` as `'secondary'` - Where the event happened, such as a button or link.

`target` as `'tertiary'` - The target of the action. The socialmedia site receiving the action.

##### Extra parameter suggestions

`displayName` To get a good textual representation. (for all objects)

#### Activity.Event.trackMediaState(mediaId, mediaType)

##### Required parameters

`mediaId` - The ID of the media entity.

`mediaType` - The type of media (video, audio, album)

##### Generated objects

`object` as `'primary'` - The media entity where a state change happened.

`origin` as `'secondary'` - The page where the event was generated.

##### Extra parameter suggestions

`displayName` To get a good textual representation.

`url` The URL to the page.

#### Activity.Event.trackScroll(scrollDepth)

##### Required parameters

`scrollDepth` - A value representing the relative scroll distance. Will be stored as a content parameter in the target.

##### Generated objects

`object` as `'primary'` - The page or entity where scroll happened.

`target` as `'secondary'` - The scroll depth.

##### Extra parameter suggestions

`displayName` - A human readable text for the scroll distance (e.g "Under header")(for `target`)

#### Activity.Event.trackExit(targetId, targetType)

##### Required parameters

`targetId` - The ID of where the user goes next.

`targetType` - The type of the target for the users exit (page, article, application)

##### Generated objects

`object` as `'primary'` - The page or entity where exit happened.

`target` as `'secondary'` - Target action for the exit, for example the next page.

##### Extra parameter suggestions

`displayName` - A human readable text such as a title or description.

#### Activity.Event.trackEvent(eventObjects)

##### Required parameters

`eventObjects` Array of event objects. (object, target, origin etc). There is no need to supply actor, target, context etc, as this will be provided by the send() function.

#### Activity.Event.addProperty(obj, property, value)

##### Required parameters

`object` - The target object in the activity (object, target, result, origin etc).

`property` - The property that should be added. Allowed properties: http://www.w3.org/TR/2015/WD-activitystreams-vocabulary-20150129/#properties '4. Properties'

`value` - Preferably a string, but an objects will work as well. If a raw Activitystream object is inputed, it can compromise future compatibility.

#### Activity.Event.addCumstomData(obj, data)

##### Required parameters

`object` - The target object in the activity (object, target, result, origin etc).

`data` - An object. All data will be a sub-object of the property `spt:custom`. All property values in the `data` object should be prefixed with `spt:`

#### Activity.Event.send()

Will ship the built event objects to the Activity object to get providor and actor, before it gets sent to the server.
